{"version":3,"sources":["../src/next-ssr-plugin.tsx"],"sourcesContent":["import { useId } from \"react\";\nimport { useServerInsertedHTML } from \"next/navigation\";\n\nimport type { EndpointMetadata } from \"./types\";\n\ndeclare const globalThis: {\n  __UPLOADTHING?: EndpointMetadata;\n};\n\nexport function NextSSRPlugin(props: { routerConfig: EndpointMetadata }) {\n  const id = useId();\n\n  // Set routerConfig on server globalThis\n  globalThis.__UPLOADTHING ??= props.routerConfig;\n\n  useServerInsertedHTML(() => {\n    const html = [\n      // Hydrate routerConfig on client globalThis\n      `globalThis.__UPLOADTHING ??= ${JSON.stringify(props.routerConfig)};`,\n    ];\n\n    return (\n      <script key={id} dangerouslySetInnerHTML={{ __html: html.join(\"\") }} />\n    );\n  });\n\n  return null;\n}\n"],"mappings":";;;AAAA,SAAS,aAAa;AACtB,SAAS,6BAA6B;AAqBhC;AAbC,SAAS,cAAc,OAA2C;AACvE,QAAM,KAAK,MAAM;AAGjB,aAAW,kBAAX,WAAW,gBAAkB,MAAM;AAEnC,wBAAsB,MAAM;AAC1B,UAAM,OAAO;AAAA;AAAA,MAEX,gCAAgC,KAAK,UAAU,MAAM,YAAY;AAAA,IACnE;AAEA,WACE,oBAAC,YAAgB,yBAAyB,EAAE,QAAQ,KAAK,KAAK,EAAE,EAAE,KAArD,EAAwD;AAAA,EAEzE,CAAC;AAED,SAAO;AACT;","names":[]}